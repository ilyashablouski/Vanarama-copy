{
  "family": "%APP_NAME%",
  "containerDefinitions": [
    {
      "image": "%IMAGE%",
      "name": "%APP_NAME%",
      "cpu": 256,
      "memory": 4096,
      "memoryReservation": 1024,
      "essential": true,
      "secrets": [
        {
          "name": "SECRET_KEY_BASE",
          "valueFrom": "%SSM_PARAMETER_BASE%/secret-key-base"
        },
        {
          "name": "REDIS_CACHE_HOST",
          "valueFrom": "%SSM_PARAMETER_BASE%/redis-host"
        },
        {
          "name": "NPM_TOKEN",
          "valueFrom": "%SSM_PARAMETER_BASE%/npm-token"
        },
        {
          "name": "API_URL",
          "valueFrom": "%SSM_PARAMETER_BASE%/gateway-api-url"
        },
        {
          "name": "LOQATE_KEY",
          "valueFrom": "%SSM_PARAMETER_BASE%/loqate-key"
        },
        {
          "name": "API_KEY",
          "valueFrom": "%SSM_PARAMETER_BASE%/fed-gateway-api-key"
        },
        {
          "name": "ROLLBAR_CLIENT_TOKEN",
          "valueFrom": "%SSM_PARAMETER_BASE%/rollbar-client-token"
        },
        {
          "name": "ROLLBAR_SERVER_TOKEN",
          "valueFrom": "%SSM_PARAMETER_BASE%/rollbar-server-token"
        },
        {
          "name": "GITHUB_TOKEN",
          "valueFrom": "%SSM_PARAMETER_BASE%/github-token"
        },
        {
          "name": "GTM_ID",
          "valueFrom": "%SSM_PARAMETER_BASE%/gtm-id"
        }
      ],
      "environment": [
        {
          "name": "FORCE_COLOR",
          "value": "true"
        },
        {
          "name": "NODE_ENV",
          "value": "production"
        },
        {
          "name": "REDIS_CACHE_KEY_PREFIX",
          "value": "next-storefront:"
        },
        {
          "name": "REDIS_CACHE_PORT",
          "value": "6379"
        },
        {
          "name": "ENABLE_DEV_TOOLS",
          "value": "true"
        },
        {
          "name": "PORT",
          "value": "8080"
        },
        {
          "name": "ENV",
          "value": "%ENVIRONMENT%"
        },
        {
          "name": "IMAGE_OPTIMIZATION_HOST",
          "value": "https://vanarama.com"
        },
        {
          "name": "HOSTNAME",
          "value": "https://%ALTERNATEDOMAIN%"
        }
      ],
      "portMappings": [
        {
          "containerPort": 8080,
          "hostPort": 0
        }
      ],
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "%LOG_GROUP%",
          "awslogs-region": "%AWS_REGION%",
          "awslogs-stream-prefix": "%APP_NAME%"
        }
      }
    }
  ]
}
